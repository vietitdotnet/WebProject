
@model ProductUpdateDTO
@{
    ViewData["Title"] = "Chỉnh sửa sản phẩm";
   
    var SeleteCategorys = ViewData["SeleteCaterorys"] as List<Category>;
}

@section Links {
    <link href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" rel="stylesheet" />
}

@section Breadcrumb{


    <li aria-current="page">
        <div class="flex items-center">
            <svg class="rtl:rotate-180 w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" />
            </svg>
            <a asp-action="DetailProduct" asp-route-id="@Model.ID" asp-controller="product" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white">

                @Model.Name
            </a>

        </div>
    </li>

    <li aria-current="page">
        <div class="flex items-center">
            <svg class="rtl:rotate-180 w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4" />
            </svg>
            <span class="ms-1 text-sm font-medium text-gray-500 md:ms-2 dark:text-gray-400">@ViewData["Title"]</span>
        </div>
    </li>
}


<div class="container form-manager">
    <form id="formId" method="post" asp-asp-route-id="@Model.ID">
        <div class="grid md:grid-cols-2 md:gap-6">
            <div class="relative z-0 w-full mb-5 group">
             @*   <input asp-for="@Model.ID" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder="" required />
                <label asp-for="@Model.ID" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Mã</label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.ID"></span></p>*@
            </div>
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.SKU" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                <label asp-for="@Model.SKU" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.SKU"></span></p>
            </div>

        </div>

        <div class="grid md:grid-cols-2 md:gap-6">
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.Name" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder="" required />
                <label asp-for="@Model.Name" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.Name"></span></p>
            </div>
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.Title" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                <label asp-for="@Model.Title" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.Title"></span></p>
            </div>


        </div>

        <div class="grid md:grid-cols-2 md:gap-6">
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.CostPrice" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                <label asp-for="@Model.CostPrice" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.CostPrice"></span></p>
            </div>
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.Price" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder="" required />
                <label asp-for="@Model.Price" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.Price"></span></p>
            </div>


        </div>

        <div class="grid md:grid-cols-2 md:gap-6">
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.StockQuantity" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                <label asp-for="@Model.StockQuantity" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.StockQuantity"></span></p>
            </div>
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.MinimumStock" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder="" required />
                <label asp-for="@Model.MinimumStock" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.MinimumStock"></span></p>
            </div>


        </div>
        <div class="grid md:grid-cols-2 md:gap-6">
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.Discount" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                <label asp-for="@Model.Discount" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"></label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.Discount"></span></p>
            </div>
            <div class="relative z-0 w-full mb-5 group">
                <input asp-for="@Model.Slug" class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer" placeholder=" " />
                <label asp-for="@Model.Slug" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">SLUG</label>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.Slug"></span></p>
            </div>

        </div>


        <div class="grid md:grid-cols-2 md:gap-6">
            <div class="relative z-0 w-full mb-5 group">
                <label class="block text-sm text-gray-900 dark:text-white">Danh mục</label>
                <select asp-for="@Model.CategoryID"
                        asp-items="@(new SelectList(SeleteCategorys,"ID","Name"))" class="block py-2.5 px-0 w-full text-sm text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer">

                    <option value="">--Không--</option>

                </select>
                <p class="mt-2 text-red-600 dark:text-red-500"><span asp-validation-for="@Model.CategoryID"></span></p>
            </div>
           
        </div>

        <div class="">
            <label asp-for="@Model.Description" class=" block mb-2 text-sm font-medium text-gray-900 dark:text-white">Mô tả</label>
            <textarea asp-for="@Model.Description" rows="3" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Mô tả đối da 135 kí tự..."></textarea>
        </div>
        <div class="mt-3">
            <label for="editor">Bài viết</label>
            <!-- Quill Editor -->
            <div id="editor" style="height: 200px;">
               @Html.Raw(@Model.Content)
            </div>
            <!-- Hidden Textarea to submit content -->
            <textarea id="Content" name="Content" style="display:none;"></textarea>
        </div>


        <div class="flex items-center p-3">
            <label class="block text-sm font-medium text-gray-900 dark:text-white">Cờ nổi bật :</label>
            <div class="mx-2">
                @Html.RadioButtonFor(model => model.IsFeatured, true) <span class="mr-2 text-sm">Có</span>
                @Html.RadioButtonFor(model => model.IsFeatured, false) <span class="text-sm">Không</span>
            </div>

        </div>

        <div class="flex items-center p-3">
            <label class="block text-sm font-medium text-gray-900 dark:text-white">Trạng thái :</label>
            <div class="mx-2">
                @Html.RadioButtonFor(model => model.IsActive, true) <span class="mr-2 text-sm">Đang kinh doanh</span>
                @Html.RadioButtonFor(model => model.IsActive, false) <span class="text-sm">Ngừng kinh doanh</span>
            </div>

        </div>



        <button type="submit" class="px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Lưu cập nhật</button>
        <a asp-action="DetailProduct" asp-route-id="@Model.ID" asp-controller="product" class="px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Về sản phẩm</a>

        <div asp-validation-summary="ModelOnly" class="mt-2 text-red-600 dark:text-red-500" role="alert"></div>
    </form>


</div>


@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.js"></script>
    <script>


        
        // Khởi tạo Quill Editor
        var quill = new Quill('#editor', {
            theme: 'snow', // Giao diện mặc định, có thể chọn 'bubble'
            placeholder: 'Nhập nội dung của bạn...',
            modules: {
                toolbar: [
                    [{ 'header': [1, 2, false] }],
                    ['bold', 'italic', 'underline'],
                    ['link', 'image'],
                    [{ 'list': 'ordered' }, { 'list': 'bullet' }]
                ]
            }
        });

      

        // Lấy form của bạn (giả sử form có id là 'formId')
        var form = document.getElementById('formId');

        // Khi form được gửi, đồng bộ nội dung của Quill với textarea
        form.onsubmit = function () {
           
            var content = document.querySelector('textarea[name=Content]');
            content.value = quill.root.innerHTML; // Gán nội dung HTML từ Quill vào textarea
        };
    </script>
}